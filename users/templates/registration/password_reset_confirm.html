{% extends "include/base.html" %}
{% load static %}


{% block page_title %}
    {{ page_title }}
{% endblock %}

{% block static_css %}
    <link rel="stylesheet" href="{% static 'pages/form.css' %}">
{% endblock %}

{% block content %}
  {% load user_filters %}
  {% if validlink %}
    <div class="main__header">
        <h1 class="main__title">Введите новый пароль</h1>
    </div>
    <div class="form-container">
      <form method="post" action="{% url 'password_reset_confirm' %}">
        {% csrf_token %}
        <div class="form__group">
          <label class="form__label">Новый пароль</label>
          <div class="form__field-group">
            {{ form.password1|addclass:"form__input" }}
            <small id="id_password1-help" class="form-text text-muted">
              {{ form.password1.help_text|safe }}
            </small>
          </div>
        </div>
        <div class="form__group">
          <label class="form__label">Подтверждения пароля</label>
          <div class="form__field-group">
            {{ form.password2|addclass:"form__input" }}
            <small id="id_password2-help" class="form-text text-muted">
              {{ form.password2.help_text|safe }}
            </small>
          </div>
        </div>
        <div class="form__footer">
          <button type="submit" class="button button_style_blue">Назначить новый пароль</button>
        </div>
        {% for error in form.errors %}
          <div class="alert alert-danger" role="alert">
            {{ error }}
          </div>
        {% endfor %}
      </form>
    </div>
  {% else %}
    <div class="main__header">
        <h1 class="main__title">Ошибка</h1>
    </div>
    <div class="card-body">
      <p>Ссылка сброса пароля содержит ошибку или устарела.</p>
    </div>
  {% endif %}

{% endblock %}